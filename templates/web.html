<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rasa 3.6 Webchat Widget</title>
</head>

<body>

    <h1>Chào mừng đến với hệ thống Chatbot</h1>
    <p>Widget chat nằm ở góc dưới bên phải màn hình.</p>

    <script>!(function () {
            let e = document.createElement("script"),
                t = document.head || document.getElementsByTagName("head")[0];
            (e.src = "../cdn.js"),
                // "https://cdn.jsdelivr.net/npm/rasa-webchat@1.0.1/lib/index.js"),
                // Hoặc dùng bản mới hơn nếu bản trên không chạy:
                // "https://cdn.jsdelivr.net/npm/rasa-webchat/lib/index.js"
                (e.async = !0),
                (e.onload = () => {
                    window.WebChat.default(
                        {
                            selector: "#webchat",
                            initPayload: "/get_started", // Intent gửi đi khi mở widget lần đầu
                            customData: { "language": "vi" }, // Dữ liệu tùy chỉnh gửi kèm
                            socketUrl: "http://localhost:5005", // Địa chỉ Rasa Server
                            socketPath: "/socket.io/",
                            title: "Trợ lý ảo Rasa",
                            subtitle: "Đang trực tuyến",
                            inputTextFieldHint: "Nhập tin nhắn...",
                            connectingText: "Đang kết nối...",
                            hideWhenNotConnected: false, // Giữ false để debug lỗi kết nối dễ hơn
                            fullScreenMode: false,
                            profileAvatar: "https://cdn-icons-png.flaticon.com/512/4712/4712035.png",
                            params: {
                                images: {
                                    dims: {
                                        width: 300,
                                        height: 200,
                                    },
                                },
                                storage: "session", // "local" hoặc "session"
                            },
                        },
                        null
                    );
                }),
                t.insertBefore(e, t.firstChild);
        })();
    </script>

</body>

</html>